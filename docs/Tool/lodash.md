# Lodash ä¸€ä¸ªå‰ç«¯å¼€å‘ä¸å¯æˆ–ç¼ºçš„ JS åº“

## æ˜¯ä»€ä¹ˆï¼Ÿèƒ½åšä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆé€‰å®ƒï¼Ÿ

Lodash è¿™ä¸ª JS åº“ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ä½¿ç”¨è¿‡ï¼Œæˆ–è€…å¤šå°‘å¬è¿‡ï¼Œäº¦æˆ–è€…ä½ å·²ç»åœ¨å¼€å‘ä¸­ç¦»ä¸å¼€ lodash äº†ï¼Œé‚£ä¹ˆå¯¹äºå‰ä¸¤è€…æ¥è¯´ï¼Œç›¸ä¿¡è¿™ç‰‡æ–‡ç« ä¸€å®šä¼šä¸ºä½ çš„å¼€å‘èŠ‚çº¦éå¸¸å¤šçš„æ—¶é—´ä»¥æé«˜ä½ çš„å¼€å‘æ•ˆç‡ã€‚è€Œå¯¹äºéå¸¸ç†Ÿç»ƒçš„å„ä½æœ‹å‹ï¼Œä¹Ÿå¸Œæœ›ä½ èƒ½çº æ­£æˆ‘åœ¨ä¸‹é¢çš„ç¼–ç å’Œæ¡ˆä¾‹ä¸­æ‰¾åˆ°é—®é¢˜ï¼Œå¹¶åŠæ—¶çº æ­£ã€‚

Lodash æ˜¯ä¸€ä¸ªé›†æˆäº†åœ¨å‰ç«¯å¼€å‘ä¸­å¯¹ Arrayï¼ŒNumberï¼ŒObjectï¼ŒString ç­‰æ•°æ®ç±»å‹æ“ä½œéš¾åº¦çš„é™ä½çš„ä¸€ä¸ªåº“ï¼Œå®ƒçš„ä¸€è‡´æ€§ã€æ¨¡å—åŒ–å¤§å¤§é™ä½äº†ä»£ç é‡å’Œå¯è¯»æ€§ï¼Œé‚£åˆ°åº•æ”¹æ€ä¹ˆä¸ªä¸€è‡´æ€§ï¼Œæ€ä¹ˆä¸ªæ¨¡å—åŒ–ï¼Œä¸‹é¢ä¸€èµ·æ¥çœ‹çœ‹

## å®‰è£… Lodash

å®‰è£… lodash åŒ…

```shell
npm install lodash
```

åœ¨é¡¹ç›®ä¸­ä½¿ç”¨

```js
import _ from 'lodash';
```

å…¶å®åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸å¿…å®‰è£…å°±å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ï¼Œè¿™åˆæ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿæˆ‘ä»¬ä»¥ Element Plus ä¸ºä¾‹ï¼Œåœ¨ Element Plus è¿™ä¸ª UI ç»„åº“ä¸­ï¼ŒLodash æ˜¯ä½œä¸ºä¸€ä¸ªä¾èµ–åº“å­˜åœ¨çš„ï¼Œæˆ‘ä»¬ä¸€èˆ¬æŠŠè¿™æ ·çš„ä¾èµ–åº“å«åšå¹½çµåº“ï¼Œä½ å¯ä»¥ç›´æ¥ä» Element Plus ä¸­å¯¼å‡º

```js
import _ from 'element-plus';
```

è¿™æ ·å¯¼å…¥ä½¿ç”¨ï¼Œå…¶å®å®Œå…¨æ²¡é—®é¢˜ï¼Œå½“ç„¶ï¼Œä½ å¦‚æœä¸ç¡®å®šè‡ªå·±åœ¨ä½¿ç”¨åº“ä¸­æ˜¯å¦æœ‰è¿™ä¸ªåº“çš„ä¾èµ–ï¼Œä¹Ÿå¯ä»¥åœ¨ node_modeles ä¸­æ‰¾æ‰¾çœ‹ï¼Œæˆ–è€…é‡æ–°ä¸‹è½½ä¹Ÿæ²¡å…³ç³»

è¯å°±è¯´åˆ°è¿™é‡Œï¼Œæ¥ä¸‹æ¥ä¸€èµ·ä½¿ç”¨èµ·æ¥çœ‹çœ‹å§

## å¸¸ç”¨ API

## \_.chunk æ•°ç»„æ‹†åˆ†

### æ“ä½œ

å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œæ“ä½œã€‚æ¯ä¸¤ä¸ªæ•°æ®æ‹¼æˆä¸€ä¸ªæ•°ç»„ï¼Œæœ€ç»ˆè¿”å›æ•´ä¸ªæ•°ç»„æ“ä½œåçš„ç»“æœ

```js
// _.chunk(æ•°ç»„ï¼Œæ¯ä¸ªåŒºå—æ•°ç»„çš„é•¿åº¦)

const arr = [1, 2, 3, 4, 5, 6, 7];
const newArr = _.chunk(arr, 2);
console.log(newArr); // [[1,2],[3,4],[5,6],[7]]
console.log(arr); // [1, 2, 3, 4, 5, 6, 7]
```

## \_.compact è¿‡æ»¤'å‡'å€¼

### æ“ä½œ

è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè‹¥å…ƒç´ åŒ…å« false,null,"",undefinde,NaN,éƒ½ä¼šè¢«è¿‡æ»¤,å¹¶ä¸”ä¸ä¼šæ”¹å˜åŸæ•°ç»„

```js
const arr = [1, 2, false, undefined, '1', '', NaN, 3, null];
const newArr = _.compact(arr);
console.log(newArr); //[1, 2, "1", 3]
console.log(arr); //  [1, 2, false, undefined, "1", "", NaN, 3, null]
```

## \_.concat æ•°ç»„è¿æ¥

è¿”å›è¿æ¥å¥½çš„æ•°ç»„ï¼Œä¸åŸå£° array.concat ç±»ä¼¼,ä½†æ˜¯ï¼ŒåŸç”Ÿ concat æ–¹æ³•åªæ”¯æŒä¸¤ä¸ªæˆ–å¤šä¸ª**æ•°ç»„**è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯ lodash å¯ä»¥æ”¯æŒæ•°ç»„ä¸æ•°æ®

```js
const arr = [1];
const str = 2;

const newArr = _.concat(arr, str, 3, [4]);
console.log(newArr); // [1, 2, 3, 4]
```

å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘åœ¨ concat çš„æ—¶å€™ï¼Œå­˜æ”¾äº†ä¸€ä¸ªæ•°ç»„è¿›å»ï¼Œä½†æ˜¯å¦‚æœè¿™é‡Œæ˜¯ä¸€ä¸ªå¤šç»´æ•°ç»„çš„è¯ï¼Œå°±æ²¡é‚£ä¹ˆé¡¶äº†

```js
const newArr = _.concat(arr, str, 3, [[4]]);
console.log(newArr); // [1, 2, 3, [4]]  åªèƒ½æ‹å¹³ä¸€å±‚
```

å¯ä»¥çœ‹åˆ°çš„ç»“æœï¼Œåªèƒ½æ‹å¹³ä¸€å±‚æ•°ç»„ï¼Œå¤šç»´æ•°ç»„çš„è¯ï¼Œå°±ä¸é€‚åˆè¿™ä¸ª API äº†

## \_.difference æ’é™¤ A ä¸­å­˜åœ¨çš„ B

### \_.difference(A, B)

### ä½¿ç”¨åœºæ™¯

è¿™ä¸ª API çš„ä½¿ç”¨åœºæ™¯éå¸¸å¤šï¼Œéšä¾¿ä¸¾ä¸ªä¾‹å­

ğŸŒ° ç°åœ¨ æœ‰ä¸€ä¸ªæ ‘å½¢æ§ä»¶ï¼Œåç«¯è¿”å›äº†ä¹‹å‰ç”¨æˆ·å‹¾é€‰çš„èŠ‚ç‚¹ï¼Œç°åœ¨ï¼Œåç«¯å¸Œæœ›ç”¨æˆ·å–æ¶ˆäº†ä¹‹å‰å‹¾é€‰çš„ APIï¼Œç„¶åä½ è¦æŠŠç°åœ¨å‹¾é€‰çš„æ‰€æœ‰ï¼Œå’Œå–æ¶ˆçš„æ‰€æœ‰ä¸€å¹¶è¿”å›ç»™åç«¯ã€‚

åœ¨æ ‘å½¢æ§ä»¶ä¸­æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæœ‰ä¸€ä¸ªå±æ€§ä¸º **getCheckedNodes** å¯ä»¥è·å–åˆ°æ‰€æœ‰çš„å·²ç»è¢«å‹¾é€‰çš„èŠ‚ç‚¹ï¼Œé‚£è°å–æ¶ˆå‹¾é€‰äº†æˆ‘ä»¬ä¸çŸ¥é“ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“æ¥å£è¿”å›äº†ä¹‹å‰è°è¢«å‹¾é€‰äº†ï¼Œæ­¤æ—¶ï¼Œè¿™ä¸ª API å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚

```js
const beforeCheck = [2, 4, 6];
const nowCheck = [1, 2, 3, 4];
_.difference(A, B);
const cancelCheck = _.difference(beforeCheck, nowCheck);
console.log(cancelCheck); // [6]
```

å“¦ï¼åŸæ¥èŠ‚ç‚¹ 6 è¢«å–æ¶ˆäº†å•Šï¼Œé‚£æˆ‘çŸ¥é“äº†ã€‚è¿™ä¸ª API çš„ä½¿ç”¨åœºæ™¯å„æœ‰ä¸åŒï¼Œä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œä»…ä¾›å‚è€ƒ

## \_.differenceWith A ä¸­æ’é™¤ B

æ–¹æ³•æ¥è¿‘ \_.difference æ¥å—ä¸€ä¸ªæ¯”è¾ƒå™¨

```js
const arr1 = [
  { x: 1, y: 2 },
  { x: 2, y: 1 },
];

const newArr = _.differenceWith(arr1, [{ x: 1, y: 2 }], _.isEqual);
console.log(newArr); // [x:2,y:1]
```

å…¶å®è¿™ä¸ª API åœ¨æ•´ä½“çš„ä½“éªŒä¸‹æ¥æ„Ÿè§‰æ¯”è¾ƒé€‚åˆä¸Šé¢æåˆ°çš„æ ‘å½¢è¯·æ±‚å‚æ•°çš„æ•°æ®ç»“æ„ï¼Œè¿™æ ·çš„ç»„ä»¶å…¶å®åœ¨ ElementPlus ä¸­çº§è”é€‰æ‹©å™¨é‡Œé¢æœ‰åŒæ ·ä¸šåŠ¡éœ€æ±‚çš„æ—¶å€™å¯ä»¥ä½¿ç”¨

## \_.drop å»é™¤å‰ n ä¸ªå…ƒç´ 

ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä¼ é€’ä¸¤ä¸ªå‚æ•°

```js
/**
 * @param {Array} éœ€è¦æ“ä½œçš„æ•°ç»„
 * @param {number} é»˜è®¤ä¸º1
 */
_.drop(Array, number);

const arr = [1, 2, 3];

const newArr = _.drop(arr, 1);
console.log(newArr); // [2,3]
```

## \_.dropRight å»é™¤å°¾éƒ¨ç¬¬ n é¡¹

ç”¨æ³•å’Œ \_.drop çš„åŒºåˆ«ä¸å¤§ï¼Œè¿™é‡Œåªä¸è¿‡æ˜¯åç€æ¥çš„

```js
const arr = [1, 2, 3, 4, 5, 6];

const newArr = _.dropRight(arr, 2); // [1,2,3,4]
```

## \_.fill æ•°ç»„å¡«å……

å¯¹éœ€è¦æ“ä½œçš„æ•°æ®è¿›è¡Œ æ›¿æ¢ï¼Œè¿™ä¸ªæ•°ç»„æˆ‘è§‰å¾—å¯¹äºç”¨æˆ·ä¿¡æ¯è„±æ•æ¯”è¾ƒå¥½ç”¨ï¼Œä¸ç”¨å†å»å†™æ¯ç‡¥æ— å‘³çš„æ­£åˆ™è¡¨è¾¾å¼äº†

```js
/**
 * @param {Array} å‚æ•° 1ã€éœ€è¦æ”¹å˜çš„æ•°ç»„
 * @param {value} å‚æ•° 2ã€éœ€è¦å¡«å……çš„æ•°æ®
 * @param {start} å‚æ•° 3ã€å¼€å§‹çš„ä½ç½®
 * @param {end}   å‚æ•° 4ã€ç»“æŸçš„ä½ç½®
 */

// å†™åˆ°è¿™æˆ‘çªç„¶è§‰å¾—ä¸å¦‚æ­£åˆ™ï¼Œå°†å°±ç€çœ‹å§ï¼Œæˆ‘è¶…ï¼ï¼

const id = '110011199010112212';
const newId = _.fill(id.split(''), '*', 6, 14);
console.log(newId.join('')); // 110011********2212
```

å†™åˆ°è¿™é‡Œæˆ‘ä¸ç¦è§‰å¾—æœ‰ç‚¹éº»çƒ¦ï¼Œå¤§æ¦‚å°±è¿™æ„æ€äº†

## \_.findIndex æ‰¾æ•°ç»„å¯¹è±¡ç»“æ„

è¿™ä¸ªæ–¹æ³•åªå»ºè®®æœ‰æ•°ç»„å¯¹è±¡çš„æ•°æ®ç»“æ„çš„æ—¶å€™åœ¨ä½¿ç”¨

```js
var users = [
  { user: 'barney', active: false },
  { user: 'fred', active: false },
  { user: 'pebbles', active: true },
];

// const a = _.findIndex([1, 2, 3], 2) æ°¸è¿œéƒ½æ‰¾ä¸åˆ° -1

const n = _.findIndex(users, { user: 'fred', active: false });
console.log(a);
```

é‚£å¦‚æœéè¦æ‰¾æ•°ç»„ä¸‹çš„æŸä¸€ä¸ªå€¼ï¼Œæˆ‘å»ºè®®çš„æ˜¯ä½¿ç”¨åŸç”Ÿçš„ findIndex æ–¹æ³•

```js
const arr = [3, 4, 5, 6];
console.log(arr.findIndex((item) => item == 1)); // -1
console.log(arr.findIndex((item) => item == 3)); // 0
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŸç”Ÿæ–¹æ³•æ˜¯æ— æ³•å®ç°æŸ¥æ‰¾æ•°ç»„å¯¹è±¡ä¸‹æŸä¸€é¡¹çš„å­˜åœ¨çš„ï¼Œåªèƒ½é€šè¿‡å¯»æ‰¾æŸä¸€é¡¹ä¸‹çš„æŸä¸€ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨

```js
var users = [
  { user: 'barney', active: false },
  { user: 'fred', active: false },
  { user: 'pebbles', active: true },
];

console.log(
  users.findIndex((item) => item == { user: 'barney', active: false })
); // -1
console.log(
  users.findIndex((item) => item.user === 'barney') // 0
); // -1
```
